C51 COMPILER V9.54   SWITCH                                                                10/27/2025 23:42:56 PAGE 1   


C51 COMPILER V9.54, COMPILATION OF MODULE SWITCH
OBJECT MODULE PLACED IN .\Objects\switch.obj
COMPILER INVOKED BY: d:\Keil_v5\C51\BIN\C51.EXE switch.c OPTIMIZE(8,SPEED) BROWSE DEBUG OBJECTEXTEND PRINT(.\Listings\sw
                    -itch.lst) OBJECT(.\Objects\switch.obj)

line level    source

   1          #include "./selfDefine.h"
   2          
   3          void pressLedOn(){
   4   1          while(1){
   5   2              if (P3_0 == 0){
   6   3                  P2_0 = 0;
   7   3              } else {
   8   3                  P2_0 = 1;
   9   3              }
  10   2          }
  11   1      }
  12          
  13          
  14          void swithControlLed(){
  15   1              // 按下松开以后，LED灯的状态取反
  16   1              while(1){
  17   2                      if(P3_0 == 0){
  18   3                              DelayXms(20);
  19   3                              if (P3_0 == 0){
  20   4                                      // 如果一直按下不松开，灯的状态不会改变，
  21   4                                      // 在while里面等着，一直到松开灯的状态改变.检测松手
  22   4                                      while(P3_0 == 0);
  23   4                                      P2_0 = ~P2_0;
  24   4                              }
  25   3                      }
  26   2              }
  27   1      }
  28          
  29          void Led2Bitmoving(){
  30   1          // 2^8 = 256 ====> unsigned char
  31   1          unsigned char num = 0;
  32   1          while(1) {
  33   2              if (P3_0 == 0){
  34   3                  DelayXms(20);
  35   3                  if(P3_0 == 0){
  36   4                      while(P3_0 == 0);
  37   4                      num++;
  38   4                      // 按位取反这里非常巧妙
  39   4                      P2 = ~num;
  40   4                  }
  41   3              }
  42   2          }
  43   1      }
  44          
  45          void keyControlLedLightRight(){
  46   1          unsigned char ledNum = 0;
  47   1          P2 = 0xfe;
  48   1          while(1){
  49   2              if (P3_0 ==0){
  50   3                  DelayXms(20);
  51   3                  while(P3_0 == 0);
  52   3                  // 松手的延时很容易忘记
  53   3                  DelayXms(20);
  54   3                  ledNum++;
C51 COMPILER V9.54   SWITCH                                                                10/27/2025 23:42:56 PAGE 2   

  55   3                  if (ledNum == 8){
  56   4                      ledNum = 0;
  57   4                  }
  58   3                  // 按位取反这里非常巧妙,这里不能使用++ledNum
  59   3                  // 如果这样的话，就会导致第一个灯永远不亮
  60   3                  P2 = ~(0x01 << ledNum);
  61   3              }
  62   2      
  63   2              if (P3_1 ==0){
  64   3                  DelayXms(20);
  65   3                  while(P3_1 == 0);
  66   3                  DelayXms(20);
  67   3                  // 负数出现
  68   3                  if (ledNum == 0){
  69   4                      ledNum = 7;
  70   4                  } else{
  71   4                      ledNum--;
  72   4                  }
  73   3                  // 按位取反这里非常巧妙
  74   3                  P2 = ~(0x01 << ledNum);
  75   3              }
  76   2          }
  77   1          
  78   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    160    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----       2
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
